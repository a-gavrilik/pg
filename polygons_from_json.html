<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Polygons</title>
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script>
  <style>
    html, body, #map {
      width: 100%;
      height: 100%;
      margin: 0;
    }
  </style>
</head>

<body>
<div id="map"></div>

<script>
ymaps.ready(async function () {

  const map = new ymaps.Map("map", {
    center: [55.75, 37.61],
    zoom: 6
  });

  // 1. Загружаем JSON
  const response = await fetch("polygons.json");
  const polygons = await response.json();

  // 2. Рисуем полигоны
  polygons.forEach(p => {
    if (!p.coords || p.coords.length < 3) return;

    const polygon = new ymaps.Polygon(
      [p.coords],
      {
        hintContent: p.l_id
      },
      {
        fillColor: "#474A5155",
        strokeColor: "#474A51",
        strokeWidth: 2
      }
    );

    map.geoObjects.add(polygon);
  });

  // 3. Масштабируем карту под все полигоны
  if (map.geoObjects.getLength() > 0) {
    map.setBounds(map.geoObjects.getBounds(), { checkZoomRange: true });
  }
});
</script>
</body>
</html>